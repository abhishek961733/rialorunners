<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Anime Runner Game</title>
<style>
  *{margin:0;padding:0;box-sizing:border-box;}
  body, html{width:100%;height:100%;overflow:hidden;font-family:sans-serif;}
  canvas{display:block;background:url('https://pbs.twimg.com/profile_images/1950265537784926208/qbjSWMDP_400x400.jpg') center/cover no-repeat;}

  #score{
    position:absolute;
    top:16px;
    left:16px;
    font-size:24px;
    color:#00ffff;
    text-shadow:1px 1px 3px black;
  }
  #gameOver{
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    font-size:36px;
    color:red;
    display:none;
    text-shadow:2px 2px 5px black;
  }
</style>
</head>
<body>
<div id="score">Score: 0</div>
<div id="gameOver">Game Over! Press R to Restart</div>
<canvas id="gameCanvas"></canvas>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

// ----------------- Game variables -----------------
let player = {
    x: 100,
    y: canvas.height - 150,
    width: 60,
    height: 80,
    color: '#ff0',
    dy: 0,
    gravity: 1.2,
    jumpForce: 20,
    grounded: true
};

let obstacles = [];
let obstacleTimer = 0;
let obstacleInterval = 100; // frames
let gameSpeed = 6;
let score = 0;
let gameOver = false;

// Placeholder character sprite (simple rectangle for now)
function drawPlayer(){
    ctx.fillStyle = player.color;
    ctx.fillRect(player.x, player.y, player.width, player.height);
}

// Generate random obstacles
function spawnObstacle(){
    const width = Math.random()*50 + 30; // 30-80 px
    const height = Math.random()*100 + 30; // 30-130 px
    obstacles.push({
        x: canvas.width,
        y: canvas.height - height - 70,
        width: width,
        height: height,
        color: '#ff4444'
    });
}

// Draw obstacles
function drawObstacles(){
    obstacles.forEach(ob=>{
        ctx.fillStyle = ob.color;
        ctx.fillRect(ob.x, ob.y, ob.width, ob.height);
    });
}

// Collision detection
function checkCollision(rect1, rect2){
    return (
        rect1.x < rect2.x + rect2.width &&
        rect1.x + rect1.width > rect2.x &&
        rect1.y < rect2.y + rect2.height &&
        rect1.y + rect1.height > rect2.y
    );
}

// Update game
function update(){
    if(gameOver) return;

    ctx.clearRect(0,0,canvas.width,canvas.height);

    // Background image is handled by CSS

    // Player physics
    player.dy += player.gravity;
    player.y += player.dy;
    if(player.y + player.height >= canvas.height - 70){
        player.y = canvas.height - 70 - player.height;
        player.dy = 0;
        player.grounded = true;
    }else{
        player.grounded = false;
    }

    drawPlayer();

    // Obstacles
    obstacleTimer++;
    if(obstacleTimer >= obstacleInterval){
        spawnObstacle();
        obstacleTimer = 0;
    }

    obstacles.forEach((ob, index)=>{
        ob.x -= gameSpeed;
        drawObstacles();
        if(checkCollision(player, ob)){
            gameOver = true;
            document.getElementById('gameOver').style.display='block';
        }
        // remove obstacles offscreen
        if(ob.x + ob.width < 0){
            obstacles.splice(index,1);
            score++;
            document.getElementById('score').textContent = 'Score: '+score;
        }
    });

    requestAnimationFrame(update);
}

// ----------------- Controls -----------------
window.addEventListener('keydown', (e)=>{
    if((e.code === 'Space' || e.code==='ArrowUp') && player.grounded){
        player.dy = -player.jumpForce;
    }
    if(e.code === 'KeyR' && gameOver){
        restartGame();
    }
});

function restartGame(){
    obstacles = [];
    player.y = canvas.height - 150;
    player.dy = 0;
    score = 0;
    gameOver = false;
    document.getElementById('score').textContent='Score: 0';
    document.getElementById('gameOver').style.display='none';
    update();
}

// Start the game
update();
</script>
</body>
</html>

