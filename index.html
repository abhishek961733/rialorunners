<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>THR RIALO Ultimate Horse Runner</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;}
html,body{width:100%;height:100%;overflow:hidden;background:#0b0f14;font-family:sans-serif;}
canvas{display:block;}

/* Score and GameOver UI */
#score{position:absolute;top:16px;left:16px;font-size:24px;color:#00ffff;text-shadow:1px 1px 3px black;}
#gameOver{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:36px;color:red;display:none;text-shadow:2px 2px 5px black;text-align:center;}

/* RIALO Logo on top */
#logo{
  position:absolute;top:20px;left:50%;transform:translateX(-50%);
  width:120px;height:120px;border-radius:50%;overflow:hidden;
  border:5px solid rgba(255,255,255,0.1);
  box-shadow:0 0 40px rgba(0,200,255,0.2),0 0 60px rgba(0,255,255,0.1) inset;
  animation: rotateLogo 16s linear infinite;
}
#logo img{width:100%;height:100%;object-fit:cover;}
@keyframes rotateLogo{0%{transform:translateX(-50%) rotate(0deg);}100%{transform:translateX(-50%) rotate(360deg);}}
</style>
</head>
<body>
<div id="score">Score: 0</div>
<div id="gameOver">Game Over! Press R to Restart</div>
<div id="logo">
  <img src="https://pbs.twimg.com/profile_images/1950265537784926208/qbjSWMDP_400x400.jpg" alt="RIALO Logo">
</div>
<canvas id="gameCanvas"></canvas>

<script>
const canvas=document.getElementById('gameCanvas');
const ctx=canvas.getContext('2d');
canvas.width=window.innerWidth;
canvas.height=window.innerHeight;

// ---------------- Game Variables ----------------
let player={
    x:150,
    y:canvas.height-120,
    width:80,
    height:60,
    dx:0,
    dy:0,
    gravity:1.2,
    jumpForce:20,
    grounded:true,
    jumpCount:0,
    maxJumps:2,
    sprite:null,
    frameX:0,
    frameY:0,
    spriteWidth:64,
    spriteHeight:64,
    scale:1.2
};

let obstacles=[];
let obstacleInterval=120;
let obstacleTimer=0;
let gameSpeed=6;
let score=0;
let gameOver=false;

// ---------------- Load Horse Sprite ----------------
player.sprite = new Image();
player.sprite.src = 'https://i.ibb.co/4Zx6b7x/anime-runner.png'; // Replace with horse running sprite sheet

// ---------------- Background Layers ----------------
let backgroundLayers=[];
for(let i=0;i<3;i++){
    let layer=[];
    for(let j=0;j<50;j++){
        layer.push({
            x:Math.random()*canvas.width,
            y:Math.random()*canvas.height,
            size:Math.random()*(20-i*5)+5,
            dy:0.2*(i+1),
            color:`rgba(0,200,255,${0.05+0.05*i})`
        });
    }
    backgroundLayers.push(layer);
}

// ---------------- Draw Functions ----------------
function drawPlayer(){
    if(player.sprite.complete){
        ctx.drawImage(
            player.sprite,
            player.frameX*player.spriteWidth,
            player.frameY*player.spriteHeight,
            player.spriteWidth,
            player.spriteHeight,
            player.x,
            player.y,
            player.spriteWidth*player.scale,
            player.spriteHeight*player.scale
        );
        if(player.frameX<3) player.frameX++; else player.frameX=0;
    } else{
        ctx.fillStyle='#ffcc00';
        ctx.fillRect(player.x,player.y,player.width,player.height);
    }
}

function drawObstacles(){
    obstacles.forEach(ob=>{
        ctx.fillStyle='#ff4444';
        ctx.fillRect(ob.x,ob.y,ob.width,ob.height);
    });
}

function drawBackground(){
    backgroundLayers.forEach(layer=>{
        layer.forEach(el=>{
            ctx.beginPath();
            ctx.arc(el.x,el.y,el.size,0,Math.PI*2);
            ctx.fillStyle=el.color;
            ctx.fill();
            el.y+=el.dy;
            if(el.y-el.size>canvas.height) el.y=-el.size;
        });
    });
}

// ---------------- Game Functions ----------------
function spawnObstacle(){
    const width=Math.random()*60+30;
    const height=Math.random()*80+30;
    obstacles.push({
        x:canvas.width,
        y:canvas.height-height-70,
        width:width,
        height:height
    });
}

function checkCollision(r){
    for(let ob of obstacles){
        if(r.x+r.width>ob.x && r.x<ob.x+ob.width && r.y+r.height>ob.y && r.y<ob.y+ob.height){
            return true;
        }
    }
    return false;
}

function update(){
    if(gameOver) return;

    ctx.clearRect(0,0,canvas.width,canvas.height);

    drawBackground();

    // Player physics
    player.dy+=player.gravity;
    player.y+=player.dy;
    player.x+=player.dx;

    // Boundaries
    if(player.y+player.height>=canvas.height-70){
        player.y=canvas.height-70-player.height;
        player.dy=0;
        player.grounded=true;
        player.jumpCount=0;
    }else{
        player.grounded=false;
    }

    if(player.x<0) player.x=0;
    if(player.x+player.width>canvas.width) player.x=canvas.width-player.width;

    drawPlayer();

    // Obstacles
    obstacleTimer++;
    if(obstacleTimer>=obstacleInterval){
        spawnObstacle();
        obstacleTimer=0;
    }

    obstacles.forEach((ob,index)=>{
        ob.x-=gameSpeed;
        drawObstacles();
        if(checkCollision(player)){
            gameOver=true;
            document.getElementById('gameOver').style.display='block';
        }
        if(ob.x+ob.width<0){
            obstacles.splice(index,1);
            score++;
            document.getElementById('score').textContent='Score: '+score;
        }
    });

    // Gradually increase speed
    if(score>0 && score%10===0) gameSpeed=6+score/10;

    requestAnimationFrame(update);
}

// ---------------- Controls ----------------
let keys={};
window.addEventListener('keydown',e=>{
    keys[e.code]=true;

    if((e.code==='Space'||e.code==='ArrowUp') && (player.grounded || player.jumpCount<player.maxJumps)){
        player.dy=-player.jumpForce;
        player.jumpCount++;
    }
});
window.addEventListener('keyup',e=>{
    keys[e.code]=false;
});

function handleMovement(){
    if(keys['ArrowLeft']) player.dx=-6;
    else if(keys['ArrowRight']) player.dx=6;
    else player.dx=0;

    requestAnimationFrame(handleMovement);
}
handleMovement();

function restartGame(){
    obstacles=[];
    player.y=canvas.height-120;
    player.dy=0;
    player.x=150;
    score=0;
    gameOver=false;
    gameSpeed=6;
    player.jumpCount=0;
    document.getElementById('score').textContent='Score: 0';
    document.getElementById('gameOver').style.display='none';
    update();
}

window.addEventListener('keydown',e=>{
    if(e.code==='KeyR' && gameOver) restartGame();
});

// Start Game
update();
</script>
</body>
</html>
